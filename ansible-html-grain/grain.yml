name: ansible_html_generator
kind: ansible
depends-on: terraform_s3_bucket,s3_torque_quali
inputs:
  bucket_name:
    type: string
    description: "Name of the S3 bucket"
  torque_output:
    type: string
    description: "Static message from previous grain"
outputs:
  html_file:
    type: file
    description: "Generated HTML file"
playbook: |
  - name: Generate HTML locally
    hosts: localhost
    connection: local
    gather_facts: no
    tasks:
      - name: Create HTML file with URLs
        copy:
          dest: "./index.html"
          content: |
            <!DOCTYPE html>
            <html>
            <head><title>Grain Outputs</title></head>
            <body>
              <h1>Generated Links</h1>
              <p>S3 Bucket: https://s3.amazonaws.com/{{ bucket_name }}{{ bucket_name }}</a></p>
              <p>Torque Output: {{ torque_output }}</p>
            </body>
            </html>
